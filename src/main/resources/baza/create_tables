create table `margotekstil`.proizvodi (
id int not null auto_increment,
ime varchar(255),
cena double,
opis varchar(1255),
pdv double,
slika varchar(255),
keywords varchar(255),
kategorija varchar(255),
primary key (id)
);


create table `margotekstil`.slicni_proizvodi (
id int not null auto_increment,
proizvod_id int not null,
slicni_proizvod_id int not null,
primary key (id),
foreign key(proizvod_id) references proizvodi(id), 
foreign key(slicni_proizvod_id) references proizvodi(id)

);

create table `margotekstil`.korpa (
id int not null auto_increment,
user_id int not null,
primary key (id),
foreign key(user_id) references users(id)
);

create table `margotekstil`.korpa_proizvodi (
id int not null auto_increment,
korpa_id int not null,
proizvod_id int not null,
kolicina int not null,
active BOOLEAN default true,
primary key (id),
foreign key(proizvod_id) references proizvodi(id),
foreign key(korpa_id) references korpa(id)
);
alter table margotekstil.proizvodi add column glavna_slika int default null;
alter table margotekstil.proizvodi add foreign key (`glavna_slika`) references photo(id);

alter table margotekstil.proizvodi 
add column kilaza double default 0,
add column dimenzije varchar(255);


create table `margotekstil`.photo (
id int not null auto_increment,
title varchar(255),
file_name varchar(255),
proizvod_id int,
active BOOLEAN default true,
primary key (id),
foreign key (proizvod_id) references proizvodi(id)
);
alter table margotekstil.photo add column glavna_slika int default null;
alter table margotekstil.photo add foreign key (`glavna_slika`) references proizvodi(id);





insert into margotekstil.proizvodi (ime, cena, opis, pdv, keywords, kategorija)
values ('Krevet za pse2', 1200, 'lepi krevet nema sta2', 20, 'krevet psi', 'pet'),
 ('Krevet za pse3', 1200, 'lepi krevet nema sta3', 20, 'krevet psi', 'pet'),
 ('Krevet za pse4', 1200, 'lepi krevet nema sta4', 20, 'krevet psi', 'pet'),
 ('Krevet za pse5', 1200, 'lepi krevet nema sta5', 20, 'krevet psi', 'pet'),
 ('Krevet za pse6', 1200, 'lepi krevet nema sta6', 20, 'krevet psi', 'pet'),
 ('Krevet za pse7', 1200, 'lepi krevet nema sta7', 20, 'krevet psi', 'pet'),
 ('Krevet za pse8', 1200, 'lepi krevet nema sta8', 20, 'krevet psi', 'pet'),
 ('Krevet za pse9', 1200, 'lepi krevet nema sta9', 20, 'krevet psi', 'pet'),
 ('Krevet za pse10', 1200, 'lepi krevet nema sta2', 20, 'krevet psi', 'pet'),
 ('Krevet za pse11', 1200, 'lepi krevet nema sta3', 20, 'krevet psi', 'pet'),
 ('Krevet za pse12', 1200, 'lepi krevet nema sta4', 20, 'krevet psi', 'pet'),
 ('Krevet za pse13', 1200, 'lepi krevet nema sta5', 20, 'krevet psi', 'pet'),
 ('Krevet za pse14', 1200, 'lepi krevet nema sta6', 20, 'krevet psi', 'pet'),
 ('Krevet za pse15', 1200, 'lepi krevet nema sta7', 20, 'krevet psi', 'pet'),
 ('Krevet za pse16', 1200, 'lepi krevet nema sta8', 20, 'krevet psi', 'pet'),
 ('Krevet za pse17', 1200, 'lepi krevet nema sta9', 20, 'krevet psi', 'pet');




create table `margotekstil`.zavrsene_porudzbine (
id int not null auto_increment,
user_id int not null,
korpa_id int not null,
ime varchar(255),
prezime varchar(255),
telefon int,
email varchar(255),
adresa varchar(255),
postanski_broj varchar(255),
grad varchar(255),
napomena varchar(1255),
nacin_placanja varchar(255),
primary key (id),
foreign key(user_id) references users(id),
foreign key(korpa_id) references korpa(id)
);




alter table margotekstil.users add column korpa_id int default null;
alter table margotekstil.users add foreign key (`korpa_id`) references korpa(id);